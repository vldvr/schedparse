# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Å–∏—Å—Ç–µ–º—ã –æ—Ç–∑—ã–≤–æ–≤

## –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É API

### –ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **PostgreSQL** - –æ—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤
- **Pillow** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **psycopg2-binary** - –¥—Ä–∞–π–≤–µ—Ä PostgreSQL

### –ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤
1. `/api/getEblanRating` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
2. `/api/createEblanComment` - —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞
3. `/api/getCommentsByEblan` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –æ—Ç–∑—ã–≤–æ–≤
4. `/api/uploadEblanImg` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
5. `/api/uploadLectImg` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ —Å –ª–µ–∫—Ü–∏–∏
6. `/api/getLectImgs` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ñ–æ—Ç–æ –ª–µ–∫—Ü–∏–π

### –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î
- `eblans` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è—Ö
- `eblan_comments` - –æ—Ç–∑—ã–≤—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏
- `lecture_images` - —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å –ª–µ–∫—Ü–∏–π

## –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env

# –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–æ–∫
mkdir -p uploads/eblans
mkdir -p uploads/lectures

# –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x deploy.sh
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª:

```bash
# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Å–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å!
DB_PASSWORD=–≤–∞—à_–±–µ–∑–æ–ø–∞—Å–Ω—ã–π_–ø–∞—Ä–æ–ª—å_–∑–¥–µ—Å—å

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - —Å–º–µ–Ω–∏—Ç–µ –¥—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
DB_USER=schedparse_user
DB_NAME=schedparse_db
```

### 3. –ó–∞–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤
–ó–∞–º–µ–Ω–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã:
- `app.py` - –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –Ω–æ–≤—ã–º–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏
- `requirements.txt` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `docker-compose.yml` - –¥–æ–±–∞–≤–ª–µ–Ω PostgreSQL
- `Dockerfile` - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `.gitignore` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–∞–ø–∫–∏ uploads

### 4. –ó–∞–ø—É—Å–∫
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π
./deploy.sh

# –ò–ª–∏ —Ä—É—á–∫–∞–º–∏:
docker-compose up -d --build
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://localhost:3434/api/cacheStats

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose exec postgres psql -U schedparse_user -d schedparse_db -c "\\dt"

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
```bash
curl -X POST http://localhost:3434/api/getEblanRating \
  -H "Content-Type: application/json" \
  -d '{"eblanId": 12345, "lectString": "–í4/1488"}'
```

### –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞
```bash
curl -X POST http://localhost:3434/api/createEblanComment \
  -H "Content-Type: application/json" \
  -d '{
    "eblanId": 12345,
    "rating": 4,
    "comment": "–•–æ—Ä–æ—à–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å",
    "features": ["–û–±—ä—è—Å–Ω—è–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ", "–ù–µ –æ–ø–∞–∑–¥—ã–≤–∞–µ—Ç"]
  }'
```

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
```bash
curl -X POST http://localhost:3434/api/uploadEblanImg \
  -F "eblanId=12345" \
  -F "file=@photo.jpg"
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤
```bash
curl -X POST http://localhost:3434/api/getCommentsByEblan \
  -H "Content-Type: application/json" \
  -d '{"eblanId": 12345}'
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ PostgreSQL
docker-compose logs postgres

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
docker-compose exec schedparse env | grep DB_
```

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –ø–∞–ø–∫–∏
ls -la uploads/
sudo chown -R 1000:1000 uploads/

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–º–∞–∫—Å 16MB)
```

### Redis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Redis
docker-compose restart redis

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
docker-compose exec redis redis-cli ping
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ö—ç—à: `GET /api/cacheStats`
- –õ–æ–≥–∏: `docker-compose logs -f`
- –°–æ—Å—Ç–æ—è–Ω–∏–µ: `docker-compose ps`

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î
```bash
# –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
docker-compose exec postgres pg_dump -U schedparse_user schedparse_db > backup.sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞
docker-compose exec -T postgres psql -U schedparse_user -d schedparse_db < backup.sql
```

### –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
docker-compose down -v

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å —á–∏—Å—Ç–æ–π –ë–î
docker-compose up -d --build
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç CORS –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON.

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ:
- –ü–æ–ª—è `eblanId` –≤—Å–µ–≥–¥–∞ —á–∏—Å–ª–æ–≤—ã–µ
- –†–µ–π—Ç–∏–Ω–≥ –æ—Ç 1 –¥–æ 5
- –ó–∞–≥—Ä—É–∂–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∂–∏–º–∞—é—Ç—Å—è
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –ø—É—Ç–∏ `/images/eblans/` –∏ `/images/lectures/`

–£–¥–∞—á–∏ —Å –ø—Ä–æ–µ–∫—Ç–æ–º! üöÄ