<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Модерация изображений</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-5">
    <h2>Модерация изображений {% if type == 'lecture' %}лекций{% else %}преподавателей{% endif %}</h2>
    <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary mb-3">Назад</a>
    <table class="table table-bordered table-striped">
        <thead>
        {% if type == 'lecture' %}
            <tr>
                <th>ID</th>
                <th>eblan_id</th>
                <th>lect_string</th>
                <th>Изображение</th>
                <th>Статус</th>
                <th>Дата</th>
                <th></th>
            </tr>
        {% else %}
            <tr>
                <th>eblan_id</th>
                <th>ФИО</th>
                <th>Изображение</th>
                <th>Статус</th>
                <th>Дата</th>
                <th></th>
            </tr>
        {% endif %}
        </thead>
        <tbody>
        {% for img in images %}
            <tr>
            {% if type == 'lecture' %}
                <td>{{ img[0] }}</td>
                <td>{{ img[1] }}</td>
                <td>{{ img[2] }}</td>
                <td>
                    {% if img[3] %}
                        <img src="{{ img[3] }}" alt="img" style="max-width:120px;">
                    {% endif %}
                </td>
                <td>
                    {% if img[4] %}
                        <span class="badge bg-success">Одобрено</span>
                    {% else %}
                        <span class="badge bg-warning text-dark">Ожидает</span>
                    {% endif %}
                </td>
                <td>{{ img[5] }}</td>
                <td>
                    {% if not img[4] %}
                        <form method="post" action="{{ url_for('admin_approve_lecture_image', image_id=img[0]) }}" style="display:inline;">
                            <button type="submit" class="btn btn-success btn-sm">Одобрить</button>
                        </form>
                    {% endif %}
                    <form method="post" action="{{ url_for('admin_delete_lecture_image', image_id=img[0]) }}" style="display:inline;">
                        <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Удалить изображение?')">Удалить</button>
                    </form>
                </td>
            {% else %}
                <td>{{ img[0] }}</td>
                <td>{{ img[1] }}</td>
                <td>
                    {% if img[2] %}
                        <img src="{{ img[2] }}" alt="img" style="max-width:120px;">
                    {% endif %}
                </td>
                <td>
                    {% if img[3] %}
                        <span class="badge bg-success">Одобрено</span>
                    {% else %}
                        <span class="badge bg-warning text-dark">Ожидает</span>
                    {% endif %}
                </td>
                <td>{{ img[4] }}</td>
                <td>
                    {% if not img[3] %}
                        <form method="post" action="{{ url_for('admin_approve_eblan_image', eblan_id=img[0]) }}" style="display:inline;">
                            <button type="submit" class="btn btn-success btn-sm">Одобрить</button>
                        </form>
                    {% endif %}
                    <form method="post" action="{{ url_for('admin_delete_eblan_image', eblan_id=img[0]) }}" style="display:inline;">
                        <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Удалить изображение?')">Удалить</button>
                    </form>
                </td>
            {% endif %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
</body>
</html>